<h1>éƒ¨ç½²</h1>

<img src="../../../assets/depoly.png" alt="riceé›†ç¾¤éƒ¨ç½²">

## Mysql

[https://github.com/gaojiayi/RICE/tree/master/db](https://github.com/gaojiayi/RICE/tree/master/db)   å°†dbç›®å½•ä¸‹çš„sqlè„šæœ¬åœ¨mysqlä¸­æ‰§è¡Œï¼Œåˆå§‹åŒ–æ•°æ®åº“

## æ­å»ºæ§åˆ¶å™¨

**ä»¥rice-bin.tar.gzä¸ºä¾‹**

```
è§£å‹  tar -zxvf rice-bin.tar.gz

cd conf
```

ç¼–è¾‘é…ç½®æ–‡ä»¶ rice-controller.propertiesï¼Œé…ç½®æ‰€æœ‰æ§åˆ¶å™¨çš„ipåœ°å€ä»¥åŠä¸šåŠ¡ç«¯å£
```
allControllerAddressStr=127.0.0.1:8900,127.0.0.1:8901,127.0.0.1:8902
```

å¯åŠ¨æ§åˆ¶å™¨
```
cd  ../bin

å¯åŠ¨  ./ricecontroller
```

å¦‚æœçœ‹åˆ°è¿™æ ·çš„è¾“å‡ºä¿¡æ¯ è¯´æ˜å·²ç»å¯åŠ¨
![controller-start-ok-log](../../../assets/controller-start-ok-log.png)

```
å…³é—­æ§åˆ¶å™¨ ./riceshutdown controller
```

æ¥ä¸‹æ¥åœ¨å…¶ä»–çš„æ§åˆ¶å™¨çš„hostä¸Šåšç›¸åŒçš„æ“ä½œéƒ¨ç½²ï¼Œç»„æˆæ§åˆ¶å™¨é›†ç¾¤ï¼Œæ§åˆ¶å™¨æ•°é‡ä¸å°‘äº3å°ã€‚

åç»­å…³äºæ§åˆ¶å™¨çš„é…ç½® å°†åœ¨åç»­ä»‹ç»ã€‚

## æ­å»ºç®¡ç†æ§åˆ¶å°

åœ¨æ¯ä¸€ä¸ªæ§åˆ¶å™¨çš„ä¸»æœºä¸Š

* **å®‰è£…nginx** 

    æ­¤å¤„è‡ªè¡Œæ­å»º

* **build rice-manage-ui**

```
cd rice-manage-ui

pnpm install

pnpm run build
```

çœ‹åˆ°è¿™ä¸ªè¾“å‡ºè¯´æ˜å·²ç»æˆåŠŸç¼–è¯‘

![manage-ui-build-ok-log](../../../assets/manage-ui-build-ok-log.png)

* **éƒ¨ç½²è‡³nginx**

`1 å°†distæ•´ä¸ªæ–‡ä»¶å¤¹ä¸Šä¼ åˆ°æœåŠ¡Nginxçš„/usr/local/nginx/html è¿™ä¸ªç›®å½•é‡Œ`

`2 vi nginx.conf è¿›å…¥nginxé…ç½®æ–‡ä»¶ä¸­ï¼Œlocationé‡Œçš„rootå°±æ˜¯è¿è¡Œindex.htmlçš„ä½ç½®`

`3 nginx -s reload`

`4 systemctl nginx restart`

*   **æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®nginxé…ç½®ç«¯å£**

    ****

****![](../../../assets/manage-ui-login.png)****

## æ­å»ºè°ƒåº¦å™¨é›†ç¾¤

**ä»¥rice-bin.tar.gzä¸ºä¾‹**

```
è§£å‹  tar -zxvf rice-bin.tar.gz

cd conf
```

ç¼–è¾‘é…ç½®æ–‡ä»¶ rice-dispatcher.propertiesï¼Œé…ç½®æ‰€æœ‰æ§åˆ¶å™¨çš„ipåœ°å€ä»¥åŠä¸šåŠ¡ç«¯å£
```
allControllerAddressStr=127.0.0.1:8900,127.0.0.1:8901,127.0.0.1:8902
```

å¯åŠ¨è°ƒåº¦å™¨
```
cd  ../bin

å¯åŠ¨  ./ricedispatcher
```

å¯åŠ¨æˆåŠŸåï¼Œæ—¥å¿—å¦‚ä¸‹ï¼š

```
2022-10-30 15:18:00 INFO main - allControllerElectionAddressStr=127.0.0.1:8898,127.0.0.1:8899,127.0.0.1:8900
2022-10-30 15:18:00 INFO main - JMXManagePort=9090
2022-10-30 15:18:00 INFO main - riceHome=/Users/gaojiayi/RICE/rice-distribution/src
2022-10-30 15:18:00 INFO main - configStorePath=/Users/gaojiayi/RICE/rice-distribution/src/conf/rice-dispatcher.properties
2022-10-30 15:18:01 INFO MLog-Init-Reporter - MLog clients using slf4j logging.
2022-10-30 15:18:01 INFO main - Initializing c3p0-0.9.5.2 [built 08-December-2015 22:06:04 -0800; debug? true; trace: 10]
2022-10-30 15:18:01 INFO NettyEventExecutor - NettyEventExecutor service started
2022-10-30 15:18:01 INFO PullTaskService - PullTaskService service started
2022-10-30 15:18:01 INFO main - [37m         _____                   _                _____                              __       _ _[m
2022-10-30 15:18:01 INFO main - [37m        |  __ \                 (_)              / ____|                            / _|     | | |[m
2022-10-30 15:18:01 INFO main - [37m        | |__) |   _ _ __  _ __  _ _ __   __ _  | (___  _   _  ___ ___ ___  ___ ___| |_ _   _| | |_   _[m
2022-10-30 15:18:01 INFO main - [37m        |  _  / | | | '_ \| '_ \| | '_ \ / _` |  \___ \| | | |/ __/ __/ _ \/ __/ __|  _| | | | | | | | |[m
2022-10-30 15:18:01 INFO main - [37m        | | \ \ |_| | | | | | | | | | | | (_| |  ____) | |_| | (_| (_|  __/\__ \__ \ | | |_| | | | |_| |[m
2022-10-30 15:18:01 INFO main - [37m        |_|  \_\__,_|_| |_|_| |_|_|_| |_|\__, | |_____/ \__,_|\___\___\___||___/___/_|  \__,_|_|_|\__, |[m
2022-10-30 15:18:01 INFO main - [37m                                          __/ |                                                    __/ |[m
2022-10-30 15:18:01 INFO main - [37m                                         |___/                                                    |___/[m
2022-10-30 15:18:01 INFO main - [37m###################################_____  _____ _____ ______  #####################################################[m
2022-10-30 15:18:01 INFO main - [37m###################################|  __ \|_   _/ ____|  ____|#####################################################[m
2022-10-30 15:18:01 INFO main - [37m###################################| |__) | | || |    | |__   #####################################################[m
2022-10-30 15:18:01 INFO main - [37m###################################|  _  /  | || |    |  __|  #####################################################[m
2022-10-30 15:18:01 INFO main - [37m###################################| | \ \ _| || |____| |____ #####################################################[m
2022-10-30 15:18:01 INFO main - [37m###################################|_|  \_\_____\_____|______|#####################################################[m
2022-10-30 15:18:01 INFO main - [37m########################################################+-+-+-+-+-+-+-+-+-+-+-+ +-+-+-+-+-+-+-+ +-+-+-+-+-+-+-+-+-+[m
2022-10-30 15:18:01 INFO main - [37m########################################################|D|i|s|t|r|i|b|u|t|e|d| |C|l|u|s|t|e|r| |S|c|h|e|d|u|l|e|r|[m
2022-10-30 15:18:01 INFO main - [37m########################################################+-+-+-+-+-+-+-+-+-+-+-+ +-+-+-+-+-+-+-+ +-+-+-+-+-+-+-+-+-+[m
2022-10-30 15:18:01 INFO main - The RICE Dispatcher boot success. serializeType=JSON

```

```
å…³é—­æ§åˆ¶å™¨ ./riceshutdown dispatcher
```

## å¤„ç†å™¨é›†ç¾¤

å¯¹äºriceè€Œè¨€ï¼Œæ¯ä¸€ä¸ªå¤„ç†å™¨å¯ä»¥æ˜¯ä¸€ä¸ªä¸šåŠ¡æœåŠ¡ï¼Œæ¯”å¦‚ä¸€ä¸ªspringbootæœåŠ¡æˆ–è€…æ˜¯ä¸€ä¸ªtomacatåº”ç”¨ã€‚
